<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>手撕JS八股文系列 | 曾广参</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="曾广参">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.7d1b523e.css" as="style"><link rel="preload" href="/assets/js/app.c918b425.js" as="script"><link rel="preload" href="/assets/js/3.ab96c64f.js" as="script"><link rel="preload" href="/assets/js/2.1cb06fef.js" as="script"><link rel="preload" href="/assets/js/66.27817686.js" as="script"><link rel="prefetch" href="/assets/js/1.9d99011a.js"><link rel="prefetch" href="/assets/js/10.0d0dcf08.js"><link rel="prefetch" href="/assets/js/100.247863f8.js"><link rel="prefetch" href="/assets/js/101.a1730869.js"><link rel="prefetch" href="/assets/js/102.25eff4cf.js"><link rel="prefetch" href="/assets/js/103.9afe084f.js"><link rel="prefetch" href="/assets/js/104.20c2c1d1.js"><link rel="prefetch" href="/assets/js/105.a02de3ad.js"><link rel="prefetch" href="/assets/js/106.af05988c.js"><link rel="prefetch" href="/assets/js/107.d6517dad.js"><link rel="prefetch" href="/assets/js/108.f6ee3b81.js"><link rel="prefetch" href="/assets/js/109.9e05daaf.js"><link rel="prefetch" href="/assets/js/11.80cd2373.js"><link rel="prefetch" href="/assets/js/110.390c9bb2.js"><link rel="prefetch" href="/assets/js/111.f4ea45c8.js"><link rel="prefetch" href="/assets/js/112.dfbd7769.js"><link rel="prefetch" href="/assets/js/113.8da1459c.js"><link rel="prefetch" href="/assets/js/114.c3474487.js"><link rel="prefetch" href="/assets/js/115.50ca204e.js"><link rel="prefetch" href="/assets/js/116.2a435581.js"><link rel="prefetch" href="/assets/js/117.84fe7e43.js"><link rel="prefetch" href="/assets/js/118.02aed350.js"><link rel="prefetch" href="/assets/js/12.1ed71737.js"><link rel="prefetch" href="/assets/js/13.f3225b38.js"><link rel="prefetch" href="/assets/js/14.df6260cd.js"><link rel="prefetch" href="/assets/js/15.e792d47f.js"><link rel="prefetch" href="/assets/js/16.9aea40ec.js"><link rel="prefetch" href="/assets/js/17.03754a76.js"><link rel="prefetch" href="/assets/js/18.54ac961c.js"><link rel="prefetch" href="/assets/js/19.b0fd36a2.js"><link rel="prefetch" href="/assets/js/20.06fb6319.js"><link rel="prefetch" href="/assets/js/21.a4083568.js"><link rel="prefetch" href="/assets/js/22.c8cf52f8.js"><link rel="prefetch" href="/assets/js/23.e69abffe.js"><link rel="prefetch" href="/assets/js/24.7a477a43.js"><link rel="prefetch" href="/assets/js/25.5998f841.js"><link rel="prefetch" href="/assets/js/26.5af03cf2.js"><link rel="prefetch" href="/assets/js/27.3069ad98.js"><link rel="prefetch" href="/assets/js/28.211d599b.js"><link rel="prefetch" href="/assets/js/29.7327102c.js"><link rel="prefetch" href="/assets/js/30.6eea8c6b.js"><link rel="prefetch" href="/assets/js/31.4dade068.js"><link rel="prefetch" href="/assets/js/32.4471b6aa.js"><link rel="prefetch" href="/assets/js/33.36f5e5e3.js"><link rel="prefetch" href="/assets/js/34.3e892c99.js"><link rel="prefetch" href="/assets/js/35.5cb6ce5f.js"><link rel="prefetch" href="/assets/js/36.341fe041.js"><link rel="prefetch" href="/assets/js/37.f25579f2.js"><link rel="prefetch" href="/assets/js/38.9d6de69a.js"><link rel="prefetch" href="/assets/js/39.c060d8b4.js"><link rel="prefetch" href="/assets/js/4.5691e7f4.js"><link rel="prefetch" href="/assets/js/40.503bc531.js"><link rel="prefetch" href="/assets/js/41.eff3bfdb.js"><link rel="prefetch" href="/assets/js/42.58c75452.js"><link rel="prefetch" href="/assets/js/43.bab12408.js"><link rel="prefetch" href="/assets/js/44.eb4273c1.js"><link rel="prefetch" href="/assets/js/45.099105b9.js"><link rel="prefetch" href="/assets/js/46.d87a0629.js"><link rel="prefetch" href="/assets/js/47.980d8e49.js"><link rel="prefetch" href="/assets/js/48.276a7f8f.js"><link rel="prefetch" href="/assets/js/49.eeb78591.js"><link rel="prefetch" href="/assets/js/5.2e71f0e7.js"><link rel="prefetch" href="/assets/js/50.bb19f0ca.js"><link rel="prefetch" href="/assets/js/51.579d3c09.js"><link rel="prefetch" href="/assets/js/52.3e83012c.js"><link rel="prefetch" href="/assets/js/53.4f6a146a.js"><link rel="prefetch" href="/assets/js/54.288653a1.js"><link rel="prefetch" href="/assets/js/55.edd49b91.js"><link rel="prefetch" href="/assets/js/56.388455c1.js"><link rel="prefetch" href="/assets/js/57.dd6f98d3.js"><link rel="prefetch" href="/assets/js/58.7cb63a42.js"><link rel="prefetch" href="/assets/js/59.aef5fd9f.js"><link rel="prefetch" href="/assets/js/6.e875ab4f.js"><link rel="prefetch" href="/assets/js/60.5a0eef55.js"><link rel="prefetch" href="/assets/js/61.92cea6aa.js"><link rel="prefetch" href="/assets/js/62.1a693b2c.js"><link rel="prefetch" href="/assets/js/63.55b0ba8a.js"><link rel="prefetch" href="/assets/js/64.a16b107e.js"><link rel="prefetch" href="/assets/js/65.e2ff57b3.js"><link rel="prefetch" href="/assets/js/67.b00bcc81.js"><link rel="prefetch" href="/assets/js/68.262dab69.js"><link rel="prefetch" href="/assets/js/69.441f56b1.js"><link rel="prefetch" href="/assets/js/70.ec14844f.js"><link rel="prefetch" href="/assets/js/71.8d8e6aaa.js"><link rel="prefetch" href="/assets/js/72.6af2998e.js"><link rel="prefetch" href="/assets/js/73.fc709d6f.js"><link rel="prefetch" href="/assets/js/74.f702fe7e.js"><link rel="prefetch" href="/assets/js/75.ed7dc326.js"><link rel="prefetch" href="/assets/js/76.b2e30956.js"><link rel="prefetch" href="/assets/js/77.626b63ff.js"><link rel="prefetch" href="/assets/js/78.10c3362b.js"><link rel="prefetch" href="/assets/js/79.63f79dfe.js"><link rel="prefetch" href="/assets/js/80.cf82dfce.js"><link rel="prefetch" href="/assets/js/81.19f74821.js"><link rel="prefetch" href="/assets/js/82.d1a379e9.js"><link rel="prefetch" href="/assets/js/83.48c94cf3.js"><link rel="prefetch" href="/assets/js/84.0fb98481.js"><link rel="prefetch" href="/assets/js/85.f8161443.js"><link rel="prefetch" href="/assets/js/86.4da15f6b.js"><link rel="prefetch" href="/assets/js/87.d1aa7e40.js"><link rel="prefetch" href="/assets/js/88.b1b65b97.js"><link rel="prefetch" href="/assets/js/89.75ab464d.js"><link rel="prefetch" href="/assets/js/9.906df462.js"><link rel="prefetch" href="/assets/js/90.cde09333.js"><link rel="prefetch" href="/assets/js/91.8e3f96c7.js"><link rel="prefetch" href="/assets/js/92.9931de76.js"><link rel="prefetch" href="/assets/js/93.1e53f01d.js"><link rel="prefetch" href="/assets/js/94.cb13aa03.js"><link rel="prefetch" href="/assets/js/95.3b088558.js"><link rel="prefetch" href="/assets/js/96.9ed8fd78.js"><link rel="prefetch" href="/assets/js/97.ff586f45.js"><link rel="prefetch" href="/assets/js/98.0584ed32.js"><link rel="prefetch" href="/assets/js/99.49415908.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.3a6fcd1b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7d1b523e.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">曾广参</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web/#JavaScript" class="nav-link">JavaSript</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><a href="/frame/" class="link-title">框架</a> <span class="title" style="display:none;">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Vue</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frame/Vue2/" class="nav-link">Vue2</a></li><li class="dropdown-subitem"><a href="/frame/Vue3/" class="nav-link">Vue3</a></li></ul></li><li class="dropdown-item"><h4>React</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frame/React/" class="nav-link">React_18</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/technology/#WebPack" class="nav-link">WebPack</a></li><li class="dropdown-item"><!----> <a href="/technology/#浏览器相关" class="nav-link">浏览器相关</a></li><li class="dropdown-item"><!----> <a href="/technology/#工程化相关" class="nav-link">工程化相关</a></li><li class="dropdown-item"><!----> <a href="/technology/#工作中遇到的问题以及解决方案" class="nav-link">工作中遇到的问题以及解决方案</a></li><li class="dropdown-item"><!----> <a href="/technology/#Git" class="nav-link">Git</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><a href="/collect/" class="link-title">收藏</a> <span class="title" style="display:none;">收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/collect/#个人产出" class="nav-link">个人产出</a></li><li class="dropdown-item"><!----> <a href="/collect/#实用工具" class="nav-link">实用工具</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/1805674660/1805674660.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://pic.imgdb.cn/item/63fca046f144a01007247d23.jpg"> <div class="blogger-info"><h3>曾广参</h3> <span>起风了，唯有努力生存。</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web/#JavaScript" class="nav-link">JavaSript</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><a href="/frame/" class="link-title">框架</a> <span class="title" style="display:none;">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Vue</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frame/Vue2/" class="nav-link">Vue2</a></li><li class="dropdown-subitem"><a href="/frame/Vue3/" class="nav-link">Vue3</a></li></ul></li><li class="dropdown-item"><h4>React</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frame/React/" class="nav-link">React_18</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/technology/#WebPack" class="nav-link">WebPack</a></li><li class="dropdown-item"><!----> <a href="/technology/#浏览器相关" class="nav-link">浏览器相关</a></li><li class="dropdown-item"><!----> <a href="/technology/#工程化相关" class="nav-link">工程化相关</a></li><li class="dropdown-item"><!----> <a href="/technology/#工作中遇到的问题以及解决方案" class="nav-link">工作中遇到的问题以及解决方案</a></li><li class="dropdown-item"><!----> <a href="/technology/#Git" class="nav-link">Git</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><a href="/collect/" class="link-title">收藏</a> <span class="title" style="display:none;">收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/collect/#个人产出" class="nav-link">个人产出</a></li><li class="dropdown-item"><!----> <a href="/collect/#实用工具" class="nav-link">实用工具</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/1805674660/1805674660.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JavaScript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/46b49b/" class="sidebar-link">手撕Promise</a></li><li><a href="/pages/283ea8/" aria-current="page" class="active sidebar-link">手撕JS八股文系列</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/283ea8/#一、事件循环" class="sidebar-link">一、事件循环</a></li><li class="sidebar-sub-header level2"><a href="/pages/283ea8/#二、作用域-作用域链-执行上下文" class="sidebar-link">二、作用域，作用域链，执行上下文</a></li><li class="sidebar-sub-header level2"><a href="/pages/283ea8/#三、js垃圾回收机制" class="sidebar-link">三、js垃圾回收机制</a></li><li class="sidebar-sub-header level2"><a href="/pages/283ea8/#四、模块化相关" class="sidebar-link">四、模块化相关</a></li></ul></li><li><a href="/pages/3435db/" class="sidebar-link">手撕观察者模式和发布订阅模式</a></li><li><a href="/pages/59ea3e/" class="sidebar-link">页面可见性——visibilitychange</a></li><li><a href="/pages/3e707e/" class="sidebar-link">JS数据类型那点事儿</a></li><li><a href="/pages/fd0cad/" class="sidebar-link">作用域、执行上下文和this</a></li><li><a href="/pages/05b49f/" class="sidebar-link">防抖和节流</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=%E5%89%8D%E7%AB%AF" title="分类" data-v-06225672>前端</a></li><li data-v-06225672><a href="/categories/?category=JavaScript" title="分类" data-v-06225672>JavaScript</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/1805674660/" target="_blank" title="作者" class="beLink" data-v-06225672>1805674660</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-03-01</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">手撕JS八股文系列<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="一、事件循环"><a href="#一、事件循环" class="header-anchor">#</a> 一、事件循环</h2> <blockquote><p>在了解事件循环之前 先要了解什么是同步任务什么是异步任务。我们都知道js代码在执行的时候是按顺序执行，在上一行代码没执行完毕是不能去执行下一行代码的。这也就意味着js在无法同时做多件事情。而异步任务就是为了解决这一问题。</p></blockquote> <p>异步任务又分为宏任务和微任务。而事件循环指的就是宏任务和微任务的执行所产生的一个循环机制。</p> <p>常见的宏任务有<code>script（整体代码）、setTimeout、setInterval、setImmediate（nodejs独有）、requestAnimationFrame（浏览器独有）、IO、UIrender（浏览器独有）</code></p> <p>常见的微任务有：<code>process.nextTick(nodejs独有)、Promise.then()、Object.observe、MutationObserver</code></p> <blockquote><p>当一段js代码在执行的时候 会维护宏任务和微任务两个队列。遇到了宏任务或者微任务就会将他压入对应的对列中。等当前代码执行完毕后就会将微任务队列里得任务拿出来执行。如果此过程中产生了新的微任务 则又维护一个新的微任务队列，等当前微任务队列清空后再去执行新的微任务队列里得任务，当所有得微任务都执行完之后就会开始执行宏任务队列里得任务。如果此过程中产生了微任务则又会开始执行微任务，以此循环直到两个队列都被清空。这就是事件循环得全过程。ps：微任务会在dom渲染之前执行，因为js引擎线程和GUI线程互斥的原因，导致js在执行，就不会去渲染页面。
下面让我们看一道练习题来巩固一下知识</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;setTimeout1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;then4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;then2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;promise1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;then1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;setTimeout2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;then3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>首先代码遇到<code>setTimeout</code> 将他加入宏任务队列，然后执行道第一个<code>promise</code> 输出其中得同步代码 <code>promise1</code>
然后将<code>.then</code>加入微任务队列。
随后又遇到了<code>setTimeout</code> 将其加入宏任务队列
紧接着输出<code>2</code>
最后又是一个<code>promise</code> 而这个<code>promise</code>里没有同步代码 所以直接将<code>then</code>加入微任务队列。
此时已经输出了<code>promise1，2</code>。
而当前得宏任务队列里有两个定时器 微任务队列里有两个<code>promise.then</code>
现在开始执行微任务，先输出<code>then1</code> 紧接着输出<code>then3</code>.
当前微任务队列已经空了 开始执行宏任务队列。
进入第一个定时器 输出<code>setTimeout1</code>，紧接着又遇到了微任务，所以又开始执行微任务。
输出<code>then2</code> 而这个微任务里又有一个微任务 所以接着执行他 输出<code>then4</code>
微任务清空了 接着去执行宏任务 输出<code>setTimeout2</code>.</p> <p>所以最终得输出顺序应该是
<code>promise1，2，then1，then3，setTimeout1，then2，then4，setTimeout2</code></p> <h2 id="二、作用域-作用域链-执行上下文"><a href="#二、作用域-作用域链-执行上下文" class="header-anchor">#</a> 二、作用域，作用域链，执行上下文</h2> <p><code>作用域</code>指的就是一个变量被定义得区域，他决定了如何查找这个变量以及变量可被访问的权限。
作用域分为全局作用域 函数作用域 块级作用域。
在es6之前js是没有块级作用域得 所以除函数作用域外var声明得变量都会提升到全局，变成全局变量。es6引进了let和const两个关键字来声明变量。从而就有了块级作用域的概念 。在一个花括号内使用let和const声明的变量只能在这个块内被访问，外部是无法访问的。const用来声明一个不可改变的常量</p> <p>js采用的是<code>静态作用域</code>，也就是变量得作用域在他被定义得时候就已经决定了。而与之对应得动态作用域则是在哪儿被调用 作用域就在哪儿。</p> <p><code>执行上下文</code>
当一个函数被调用得时候，js就会进行准备工作， 这个准备工作指的就是<code>创建执行上下文</code>。
一个执行上下文包括 <code>变量对象（vo）</code> <code>作用域链</code> <code>this</code>
执行上下文也分为全局执行上下文和函数执行上下文。</p> <p>js有一个专门维护执行上下文得栈 全局执行上下文始终在栈得最底部 每个函数被调用时 他得执行上下文就会被压入栈中 等他执行完毕后 这个执行上下文又会被弹出。</p> <p>变量对象包括函数得形参 以及函数内部所声明得所有变量。当在函数中访问一个变量时 js会现在当前函数得执行上下文得变量对象中查找，如果没有找到 则会去查找父级作用域得变量对象。一直到全局上下文得变量对象为止。这个查找得过程就是<code>作用域链</code>。</p> <h2 id="三、js垃圾回收机制"><a href="#三、js垃圾回收机制" class="header-anchor">#</a> 三、js垃圾回收机制</h2> <p>js大概有两种垃圾回收机制</p> <ul><li><p>1、标记清除
js引擎会给所有的对象打上一个标记，当这个对象被引用时 就会把标记清除掉，最后再把所有还保留这标记的变量回收 释放内存。这种方法会导致有很多内存碎片。</p></li> <li><p>2、引用计数
采用计数的方式记录一个变量是否可以被回收，初始赋值的时候数值+1当变量被赋值给别人的时候 数量+1 当给变量赋值的时候数量-1，如果变量的计数为0则说明没有人引用这个变量了。则可以回收此变量。直接给变量赋值null此变量就会被回收。</p></li></ul> <h2 id="四、模块化相关"><a href="#四、模块化相关" class="header-anchor">#</a> 四、模块化相关</h2> <blockquote><p>模块化有利于代码的提高代码复用性和可维护性，防止命名冲突以及全局污染。</p></blockquote> <p>js的模块化方案大致有以下几种：</p> <ul><li>1、<code>AMD</code>：异步加载模块，所有的模块代码都写在回调函数中，只有当模块加载完毕才会去执行回调函数里的代码，此模式适用于浏览器端</li> <li>2、<code>CMD</code>：可异步也可同步的模块加载方案，他和AMD不同的是执行了require就会去加载模块，支持同步也支持异步，支持浏览器也支持node</li> <li>3、<code>UMD</code>：AMD和CMD的整合</li> <li>4、<code>Commonjs</code>：这是nodejs的模块化方案他的每个js都是一个模块，每个js中它提供了几个核心变量：<code>exports、module.exports、require</code>。前两个用来暴露出变量，最后一个用来引入。</li> <li>-4.1、require的加载流程：首先被加载的内容分为 node核心模块，自定义模块，文件模块。 像我们通过路劲引入的则是文件模块，而直接通过包名引入的话 commonjs首先会去查找是否是node自带的模块，如果不是则去node_modules里查找这个包，如果还没有则往父级的依赖文件夹里找 直到根目录为止。
那commonjs是如何避免循环引用和重复加载的呢？
要搞清楚这个问题得直到module和Module这两个东西，上文说了每个js文件都是一个module，这个module身上不仅有导入导出的方法，还有一个loaded属性，表示这个模块是否被加载过。Module则是nodejs在运行的时候创建的一个保存所有模块值得变量，每个模块在被加载之前都会去Module身上查找是否有缓存，没有的话就会存下。</li></ul> <p>有了这两个东西之后commonjs就可以做到避免重复加载和循环引用的问题。</p> <ul><li>5、ESM：<code>Es Module</code>是JS的es6规范才提出的模块化方案，是一个真正属于js自己的模块化规范</li></ul> <p>他的诞生有很多优势：
借助 Es Module 的静态导入导出的优势，实现了 tree shaking。
Es Module 还可以 import() 懒加载方式实现代码分割。</p> <p>Es Module 中用 export 用来导出模块，import 用来导入模块。但是 export 配合 import 会有很多种组合情况，接下来我们逐一分析一下。</p> <p>ESM的导入导出都是静态的，import会自动提升到代码顶部，并且他的语法都不能写在函数作用域和块级作用域内，也不能写在条件判断内。</p> <p>正因为这种静态的语法，所有他会在代码编译阶段就确定依赖关系，也是借助这个特性，可以做摇树优化。</p> <p>因为import会提升到最顶部，所以esm的执行顺序是先子后父。</p> <p>下面总结一下ESM和Commonjs：</p> <p><strong>Commonjs</strong>：</p> <ul><li>1、代码运行时加载</li> <li>2、导出的是值得浅拷贝，值一旦输出，在模块内到处方法是无法修改已导出的值的</li> <li>3、可以动态加载，对每个导出的值都有缓存，能有效解决循环引用的问题</li> <li>4、加载的时候才执行</li></ul> <p><strong>ESM</strong></p> <ul><li>1、代码编译时加载</li> <li>2、导出的值可以被模块内的方法修改，但不支持外界主动修改</li> <li>3、写法灵活，可以单个导入导出混合导入导出</li> <li>4、因为import会提升，所以esm的模块会提前加载并执行</li></ul></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/1805674660/1805674660.github.io/edit/master/docs/01.前端/01.JavaScript/02.手撕JS八股文系列.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2023/11/02, 21:25:43</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/46b49b/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">手撕Promise</div></a> <a href="/pages/3435db/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">手撕观察者模式和发布订阅模式</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/46b49b/" class="prev">手撕Promise</a></span> <span class="next"><a href="/pages/3435db/">手撕观察者模式和发布订阅模式</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/6a926c/"><div>
            工具
            <!----></div></a> <span class="date">11-02</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/f99927/"><div>
            一些小工具
            <!----></div></a> <span class="date">11-02</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/8dcf4d/"><div>
            妙用svg实现dom转image
            <!----></div></a> <span class="date">11-01</span></dt></dl> <dl><dd></dd> <dt><a href="/archives" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="https://github.com/1805674660/" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2023-2023
    <span>曾广参 | <a href="https://github.com/xugaoyi/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div></div><canvas id="vuepress-canvas-cursor"></canvas><!----><div></div></div></div>
    <script src="/assets/js/app.c918b425.js" defer></script><script src="/assets/js/3.ab96c64f.js" defer></script><script src="/assets/js/2.1cb06fef.js" defer></script><script src="/assets/js/66.27817686.js" defer></script>
  </body>
</html>
